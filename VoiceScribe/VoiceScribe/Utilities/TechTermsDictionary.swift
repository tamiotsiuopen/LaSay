//
//  TechTermsDictionary.swift
//  VoiceScribe
//
//  Created by Claude on 2026/2/15.
//

import Foundation

struct TechTermsDictionary {
    // 常見的錯誤拼寫 → 正確拼寫
    // 只處理大小寫修正，不改語意
    static let corrections: [String: String] = [
        // ========== Languages ==========
        "javascript": "JavaScript",
        "typescript": "TypeScript",
        "python": "Python",
        "java": "Java",
        "golang": "Golang",
        "swift": "Swift",
        "kotlin": "Kotlin",
        "rust": "Rust",
        "c sharp": "C#",
        "c#": "C#",
        "c plus plus": "C++",
        "c++": "C++",
        "objective c": "Objective-C",
        "objective-c": "Objective-C",
        "ruby": "Ruby",
        "php": "PHP",
        "scala": "Scala",
        "elixir": "Elixir",
        "dart": "Dart",
        "lua": "Lua",
        "perl": "Perl",
        "haskell": "Haskell",
        "clojure": "Clojure",
        "groovy": "Groovy",
        "r language": "R",

        // ========== Frontend Frameworks & Libraries ==========
        "react": "React",
        "reactjs": "React.js",
        "react native": "React Native",
        "nextjs": "Next.js",
        "next.js": "Next.js",
        "vuejs": "Vue.js",
        "vue.js": "Vue.js",
        "nuxtjs": "Nuxt.js",
        "nuxt.js": "Nuxt.js",
        "nuxt": "Nuxt",
        "angular": "Angular",
        "svelte": "Svelte",
        "sveltekit": "SvelteKit",
        "remix": "Remix",
        "astro": "Astro",
        "gatsby": "Gatsby",
        "jquery": "jQuery",
        "tailwind": "Tailwind",
        "tailwind css": "Tailwind CSS",
        "tailwindcss": "Tailwind CSS",
        "bootstrap": "Bootstrap",
        "material ui": "Material UI",
        "chakra ui": "Chakra UI",
        "shadcn": "shadcn",
        "sass": "Sass",
        "scss": "SCSS",
        "less": "Less",
        "styled components": "styled-components",
        "storybook": "Storybook",
        "swiftui": "SwiftUI",
        "uikit": "UIKit",
        "jetpack compose": "Jetpack Compose",
        "flutter": "Flutter",
        "electron": "Electron",
        "tauri": "Tauri",

        // ========== Backend Frameworks ==========
        "fastapi": "FastAPI",
        "django": "Django",
        "flask": "Flask",
        "express": "Express",
        "expressjs": "Express.js",
        "nestjs": "NestJS",
        "koa": "Koa",
        "spring": "Spring",
        "spring boot": "Spring Boot",
        "springboot": "Spring Boot",
        "dotnet": ".NET",
        ".net": ".NET",
        "asp.net": "ASP.NET",
        "aspnet": "ASP.NET",
        "laravel": "Laravel",
        "symfony": "Symfony",
        "rails": "Rails",
        "ruby on rails": "Ruby on Rails",
        "gin": "Gin",
        "fiber": "Fiber",
        "echo": "Echo",
        "actix": "Actix",
        "rocket": "Rocket",
        "phoenix": "Phoenix",
        "ktor": "Ktor",
        "vapor": "Vapor",

        // ========== Data Science / ML / AI ==========
        "pandas": "pandas",
        "numpy": "NumPy",
        "scipy": "SciPy",
        "scikit learn": "scikit-learn",
        "sklearn": "scikit-learn",
        "matplotlib": "Matplotlib",
        "seaborn": "Seaborn",
        "plotly": "Plotly",
        "xgboost": "XGBoost",
        "lightgbm": "LightGBM",
        "catboost": "CatBoost",
        "pytorch": "PyTorch",
        "tensorflow": "TensorFlow",
        "keras": "Keras",
        "hugging face": "Hugging Face",
        "huggingface": "Hugging Face",
        "transformers": "Transformers",
        "openai": "OpenAI",
        "chatgpt": "ChatGPT",
        "gpt": "GPT",
        "claude": "Claude",
        "gemini": "Gemini",
        "langchain": "LangChain",
        "llamaindex": "LlamaIndex",
        "llama index": "LlamaIndex",
        "ollama": "Ollama",
        "llm": "LLM",
        "rag": "RAG",
        "mlops": "MLOps",
        "mlflow": "MLflow",
        "wandb": "W&B",
        "weights and biases": "Weights & Biases",
        "jupyter": "Jupyter",
        "jupyter notebook": "Jupyter Notebook",
        "jupyterlab": "JupyterLab",
        "colab": "Colab",
        "streamlit": "Streamlit",
        "gradio": "Gradio",
        "shap": "SHAP",
        "feature store": "Feature Store",

        // ========== Data Engineering ==========
        "spark": "Spark",
        "pyspark": "PySpark",
        "hadoop": "Hadoop",
        "hive": "Hive",
        "presto": "Presto",
        "trino": "Trino",
        "flink": "Flink",
        "kafka": "Kafka",
        "airflow": "Airflow",
        "dagster": "Dagster",
        "prefect": "Prefect",
        "dbt": "dbt",
        "fivetran": "Fivetran",
        "airbyte": "Airbyte",
        "snowflake": "Snowflake",
        "redshift": "Redshift",
        "bigquery": "BigQuery",
        "databricks": "Databricks",
        "delta lake": "Delta Lake",
        "iceberg": "Iceberg",
        "parquet": "Parquet",
        "avro": "Avro",
        "etl": "ETL",
        "elt": "ELT",
        "data lake": "Data Lake",
        "data warehouse": "Data Warehouse",
        "data mesh": "Data Mesh",
        "data pipeline": "Data Pipeline",
        "looker": "Looker",
        "tableau": "Tableau",
        "power bi": "Power BI",
        "metabase": "Metabase",
        "superset": "Superset",

        // ========== Databases ==========
        "redis": "Redis",
        "postgres": "PostgreSQL",
        "postgresql": "PostgreSQL",
        "mysql": "MySQL",
        "mariadb": "MariaDB",
        "mongodb": "MongoDB",
        "mongo": "MongoDB",
        "sqlite": "SQLite",
        "cassandra": "Cassandra",
        "dynamodb": "DynamoDB",
        "couchdb": "CouchDB",
        "neo4j": "Neo4j",
        "elasticsearch": "Elasticsearch",
        "opensearch": "OpenSearch",
        "supabase": "Supabase",
        "firebase": "Firebase",
        "firestore": "Firestore",
        "planetscale": "PlanetScale",
        "cockroachdb": "CockroachDB",
        "pinecone": "Pinecone",
        "weaviate": "Weaviate",
        "chromadb": "ChromaDB",
        "milvus": "Milvus",

        // ========== DevOps / Infra / Cloud ==========
        "docker": "Docker",
        "kubernetes": "Kubernetes",
        "k8s": "K8s",
        "helm": "Helm",
        "istio": "Istio",
        "aws": "AWS",
        "gcp": "GCP",
        "azure": "Azure",
        "vercel": "Vercel",
        "netlify": "Netlify",
        "heroku": "Heroku",
        "digitalocean": "DigitalOcean",
        "cloudflare": "Cloudflare",
        "terraform": "Terraform",
        "pulumi": "Pulumi",
        "ansible": "Ansible",
        "jenkins": "Jenkins",
        "github actions": "GitHub Actions",
        "gitlab ci": "GitLab CI",
        "circleci": "CircleCI",
        "argocd": "ArgoCD",
        "nginx": "Nginx",
        "apache": "Apache",
        "caddy": "Caddy",
        "prometheus": "Prometheus",
        "grafana": "Grafana",
        "datadog": "Datadog",
        "sentry": "Sentry",
        "new relic": "New Relic",
        "lambda": "Lambda",
        "s3": "S3",
        "ec2": "EC2",
        "ecs": "ECS",
        "eks": "EKS",
        "fargate": "Fargate",
        "cloudformation": "CloudFormation",

        // ========== Tools & Editors ==========
        "github": "GitHub",
        "gitlab": "GitLab",
        "bitbucket": "Bitbucket",
        "git": "Git",
        "npm": "npm",
        "yarn": "yarn",
        "pnpm": "pnpm",
        "bun": "Bun",
        "deno": "Deno",
        "webpack": "webpack",
        "vite": "Vite",
        "esbuild": "esbuild",
        "rollup": "Rollup",
        "turbopack": "Turbopack",
        "turborepo": "Turborepo",
        "linux": "Linux",
        "ubuntu": "Ubuntu",
        "debian": "Debian",
        "centos": "CentOS",
        "macos": "macOS",
        "ios": "iOS",
        "android": "Android",
        "xcode": "Xcode",
        "vs code": "VS Code",
        "vscode": "VS Code",
        "visual studio code": "VS Code",
        "visual studio": "Visual Studio",
        "intellij": "IntelliJ",
        "pycharm": "PyCharm",
        "webstorm": "WebStorm",
        "goland": "GoLand",
        "rider": "Rider",
        "neovim": "Neovim",
        "vim": "Vim",
        "emacs": "Emacs",
        "cursor": "Cursor",
        "copilot": "Copilot",
        "claude code": "Claude Code",
        "codex": "Codex",

        // ========== Testing ==========
        "jest": "Jest",
        "mocha": "Mocha",
        "cypress": "Cypress",
        "playwright": "Playwright",
        "selenium": "Selenium",
        "pytest": "pytest",
        "unittest": "unittest",
        "junit": "JUnit",
        "rspec": "RSpec",
        "vitest": "Vitest",
        "testing library": "Testing Library",

        // ========== Concepts & Acronyms ==========
        "api": "API",
        "rest": "REST",
        "restful": "RESTful",
        "graphql": "GraphQL",
        "grpc": "gRPC",
        "websocket": "WebSocket",
        "json": "JSON",
        "yaml": "YAML",
        "toml": "TOML",
        "xml": "XML",
        "csv": "CSV",
        "html": "HTML",
        "css": "CSS",
        "sql": "SQL",
        "nosql": "NoSQL",
        "ci cd": "CI/CD",
        "cicd": "CI/CD",
        "devops": "DevOps",
        "devsecops": "DevSecOps",
        "saas": "SaaS",
        "paas": "PaaS",
        "iaas": "IaaS",
        "oauth": "OAuth",
        "jwt": "JWT",
        "sdk": "SDK",
        "cli": "CLI",
        "crud": "CRUD",
        "orm": "ORM",
        "mvc": "MVC",
        "mvvm": "MVVM",
        "dry": "DRY",
        "solid": "SOLID",
        "tdd": "TDD",
        "bdd": "BDD",
        "agile": "Agile",
        "scrum": "Scrum",
        "kanban": "Kanban",
        "jira": "Jira",
        "confluence": "Confluence",
        "notion": "Notion",
        "figma": "Figma",
        "a b test": "A/B Test",
        "ab test": "A/B Test",
        "kpi": "KPI",
        "okr": "OKR",
        "dag": "DAG",
        "cron": "cron",
        "regex": "regex",
        "tcp": "TCP",
        "http": "HTTP",
        "https": "HTTPS",
        "ssh": "SSH",
        "ssl": "SSL",
        "tls": "TLS",
        "dns": "DNS",
        "cdn": "CDN",
        "vpc": "VPC",
        "iam": "IAM",
    ]

    /// 對文字套用術語修正（word boundary aware）
    static func apply(to text: String) -> String {
        var result = text
        for (wrong, correct) in corrections {
            // 使用 word boundary regex 避免部分匹配
            // 例如不要把 "expression" 裡的 "express" 改掉
            let pattern = "\\b\(NSRegularExpression.escapedPattern(for: wrong))\\b"
            if let regex = try? NSRegularExpression(pattern: pattern, options: .caseInsensitive) {
                result = regex.stringByReplacingMatches(
                    in: result,
                    range: NSRange(result.startIndex..., in: result),
                    withTemplate: correct
                )
            }
        }
        return result
    }
}
